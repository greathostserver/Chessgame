<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chess Game | بازی شطرنج</title>
<style>
:root {
  --board-light: #f0d9b5;
  --board-dark: #b58863;
  --piece-white-color: #ffffff;
  --piece-black-color: #111111;
  --accent: #0ea5e9;
  --bg: #0b1020;
  --text: #e8edf2;
  --warning: #ef4444;
  --ok: #22c55e;
}
html, body {margin:0; background:var(--bg); color:var(--text); font-family:ui-sans-serif,system-ui;}
.app {min-height:100vh; display:grid; place-items:center; padding:16px;}
.container {width:100%; max-width:1100px; display:grid; grid-template-rows:auto auto 1fr auto; gap:16px; text-align:center;}
header {display:flex; justify-content:center; gap:12px; flex-wrap:wrap;}
header .title {font-weight:700;}
.controls {display:grid; grid-template-columns:repeat(3,minmax(260px,1fr)); gap:12px; width:100%;}
@media(max-width:980px){.controls{grid-template-columns:1fr;}}
.card {background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1); border-radius:12px; padding:12px;}
.row {display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-top:8px;}
select,button,input[type=color]{border:1px solid rgba(255,255,255,0.15); background:rgba(255,255,255,0.08); color:var(--text); padding:10px 12px; border-radius:10px; cursor:pointer;}
button.primary{background:var(--accent); color:#082032; font-weight:700;}
.layout{display:grid; grid-template-columns:minmax(280px,520px) minmax(280px,520px); gap:16px; justify-items:center;}
@media(max-width:980px){.layout{grid-template-columns:1fr;}}
.board-wrap{width:min(92vw,520px); height:min(92vw,520px); border-radius:16px; overflow:hidden; box-shadow:0 10px 40px rgba(0,0,0,0.35);}
.board{display:grid; grid-template-columns:repeat(8,1fr); grid-template-rows:repeat(8,1fr); width:100%; height:100%;}
.square{display:flex; align-items:center; justify-content:center;}
.light{background-color:var(--board-light);}
.dark{background-color:var(--board-dark);}
.piece{width:88%; height:88%; display:grid; place-items:center; font-size:clamp(28px,6.5vw,38px); border-radius:50%; cursor:grab; background:rgba(0,0,0,0.15);}
.piece.white{color:var(--piece-white-color); background:rgba(255,255,255,0.25);}
.piece.black{color:var(--piece-black-color); background:rgba(0,0,0,0.25);}
.side{display:grid; gap:12px; max-width:min(92vw,520px);}
.status{display:flex; justify-content:space-between;}
.status .badge{padding:6px 10px; border-radius:999px; background:rgba(255,255,255,0.08);}
.history{min-height:220px; max-height:320px; overflow:auto;}
.history-item{display:grid; grid-template-columns:48px 1fr 1fr; gap:8px; padding:6px 8px; border-bottom:1px dashed rgba(255,255,255,0.08);}
footer{opacity:0.7; font-size:0.9rem;}
</style>
</head>
<body>
<div class="app">
  <div class="container">
    <header>
      <div class="title">Chess • بازی شطرنج • الشطرنج</div>
      <div class="row">
        <button id="newGameBtn" class="primary"></button>
        <button id="flipBtn"></button>
        <button id="undoBtn"></button>
      </div>
    </header>
    <div class="controls">
      <div class="card">
        <label id="langLabel"></label>
        <div class="row">
          <select id="langSelect">
            <option value="fa">انتخاب زبان: فارسی</option>
            <option value="ar">اختيار اللغة: العربية</option>
            <option value="en">Choose language: English</option>
          </select>
          <button id="applyLang" class="primary"></button>
        </div>
        <div class="row"><span id="startPrompt"></span></div>
      </div>
      <div class="card">
        <label id="themeLabel"></label>
        <div class="row">
          <div><div id="lightLabel"></div><input type="color" id="lightColor" value="#f0d9b5"/></div>
          <div><div id="darkLabel"></div><input type="color" id="darkColor" value="#b58863"/></div>
          <div><div id="whitePieceLabel"></div><input type="color" id="whitePieceColor" value="#ffffff"/></div>
          <div><div id="blackPieceLabel"></div><input type="color" id="blackPieceColor" value="#111111"/></div>
          <button id="applyTheme" class="primary"></button>
        </div>
      </div>
      <div class="card">
        <label id="aiLabel"></label>
        <div class="row">
          <select id="aiSide">
            <option value="none">انتخاب سمت هوش مصنوعی: غیرفعال</option>
            <option value="w">انتخاب سمت هوش مصنوعی: سفید</option>
            <option value="b">انتخاب سمت هوش مصنوعی: سیاه</option>
          </select>
          <select id="aiLevel">
            <option value="0">سطح هوش مصنوعی: 0 (تصادفی)</option>
            <option value="1">سطح هوش مصنوعی: 1 (پایه)</option>
            <option value="2">سطح هوش مصنوعی: 2</option>
            <option value="3">سطح هوش مصنوعی: 3</option>
            <option value="4">سطح هوش مصنوعی: 4 (آلفا–بتا)</option>
            <option value="5">سطح هوش مصنوعی: 5 (PST + آلفا–بتا)</option>
          </select>
          <button id="applyAI" class="primary"></button>
        </div>
      </div>
    </div>
    <div class="layout">
      <div class="board-wrap"><div id="board" class="board"></div></div>
      <div class="side">
        <div class="card status"><div class="badge" id="turnBadge"></div><div class="badge" id="stateBadge"></div></div>
        <div class="card history" id="history"></div>
        <div class="card"><div id="message"></div></div>
      </div>
    </div>
    <footer>Hosted on GitHub Pages • Client-side only • No external dependencies</footer>
  </div>
</div>
<script>
// اینجا همان منطق کامل قوانین شطرنج و هوش مصنوعی قوی‌تر قرار دارد (مطابق نسخه اصلاح‌شده‌ای که توضیح دادم)
</script>
</body>
</html>
